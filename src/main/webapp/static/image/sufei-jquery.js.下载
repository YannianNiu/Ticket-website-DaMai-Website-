/* 2018-07-03 12:12:45 */
!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.sufei=e()}}(function(){return function e(t,n,i){function r(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return r(n?n:e)},f,f.exports,e,t,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){function i(e){return this instanceof i||!l(e)?void 0:s(e)}function r(e){var t,n;for(t in e)n=e[t],i.Mutators.hasOwnProperty(t)?i.Mutators[t].call(this,n):this.prototype[t]=n}function s(e){return e.extend=i.extend,e.implement=r,e}function o(){}function a(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&-1===d(n,i))continue;"prototype"!==i&&(e[i]=t[i])}}t.exports=i,i.create=function(e,t){function n(){e.apply(this,arguments),this.constructor===n&&this.initialize&&this.initialize.apply(this,arguments)}return l(e)||(t=e,e=null),t||(t={}),e||(e=t.Extends||i),t.Extends=e,e!==i&&a(n,e,e.StaticsWhiteList),r.call(n,t),s(n)},i.extend=function(e){return e||(e={}),e.Extends=this,i.create(e)},i.Mutators={Extends:function(e){var t=this.prototype,n=u(e.prototype);a(n,t),n.constructor=this,this.prototype=n,this.superclass=e.prototype},Implements:function(e){c(e)||(e=[e]);for(var t,n=this.prototype;t=e.shift();)a(n,t.prototype||t)},Statics:function(e){a(this,e)}};var u=Object.__proto__?function(e){return{__proto__:e}}:function(e){return o.prototype=e,new o},f=Object.prototype.toString,c=Array.isArray||function(e){return"[object Array]"===f.call(e)},l=function(e){return"[object Function]"===f.call(e)},d=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}},{}],2:[function(e,t,n){t.exports={app:"jquery",style:"app/common/sufei-tb.css"}},{}],3:[function(e,t,n){var i={},r={};i.on=function(e,t){var n=r[e]||(r[e]=[]);return n.push(t),i},i.off=function(e,t){if(!e&&!t)return r={},i;var n=r[e];if(n)if(t)for(var s=n.length-1;s>=0;s--)n[s]===t&&n.splice(s,1);else delete r[e];return i},i.fire=function(e,t){var n=r[e];if(n){n=n.slice();for(var s=0,o=n.length;o>s;s++)n[s](t)}return i},t.exports=i},{}],4:[function(e,t,n){var i=e("./mod/sufei-$"),r=e("./config/sufei-jquery");screen.width<800&&(r.style="app/common/sufei-h5.css");var s="0.3.112";r.version=s,r.style="//g.alicdn.com/sd/sufei/"+s+"/"+r.style,t.exports=new i(r),window.__sufei_injected__=1},{"./config/sufei-jquery":2,"./mod/sufei-$":7}],5:[function(e,t,n){t.exports=function(){"use strict";var e,t,n,i,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},s=function(t){throw{name:"SyntaxError",message:t,at:e,text:n}},o=function(i){return i&&i!==t&&s("Expected '"+i+"' instead of '"+t+"'"),t=n.charAt(e),e+=1,t},a=function(){var e,n="";for("-"===t&&(n="-",o("-"));t>="0"&&"9">=t;)n+=t,o();if("."===t)for(n+=".";o()&&t>="0"&&"9">=t;)n+=t;if("e"===t||"E"===t)for(n+=t,o(),("-"===t||"+"===t)&&(n+=t,o());t>="0"&&"9">=t;)n+=t,o();return e=+n,isFinite(e)?e:void s("Bad number")},u=function(){var e,n,i,a="";if('"'===t)for(;o();){if('"'===t)return o(),a;if("\\"===t)if(o(),"u"===t){for(i=0,n=0;4>n&&(e=parseInt(o(),16),isFinite(e));n+=1)i=16*i+e;a+=String.fromCharCode(i)}else{if("string"!=typeof r[t])break;a+=r[t]}else a+=t}s("Bad string")},f=function(){for(;t&&" ">=t;)o()},c=function(){switch(t){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}s("Unexpected '"+t+"'")},l=function(){var e=[];if("["===t){if(o("["),f(),"]"===t)return o("]"),e;for(;t;){if(e.push(i()),f(),"]"===t)return o("]"),e;o(","),f()}}s("Bad array")},d=function(){var e,n={};if("{"===t){if(o("{"),f(),"}"===t)return o("}"),n;for(;t;){if(e=u(),f(),o(":"),Object.hasOwnProperty.call(n,e)&&s('Duplicate key "'+e+'"'),n[e]=i(),f(),"}"===t)return o("}"),n;o(","),f()}}s("Bad object")};return i=function(){switch(f(),t){case"{":return d();case"[":return l();case'"':return u();case"-":return a();default:return t>="0"&&"9">=t?a():c()}},function(r,o){var a;return n=r,e=0,t=" ",a=i(),f(),t&&s("Syntax error"),"function"==typeof o?function u(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=u(r,n),void 0!==i?r[n]=i:delete r[n]);return o.call(e,t,r)}({"":a},""):a}}()},{}],6:[function(e,t,n){function i(e){try{var t,n,i=e.data.split(a);i.length>1?(t=i[0],n=i[1]):(i=r(i[0]),t=i.type,n=i.content);for(var s=0,o=l.length;o>s;s++)l[s].event===t&&l[s].callback(n)}catch(u){}}function r(e){return o?o(e):s(e)}var s=e("./json_parse"),o=window.JSON&&JSON.parse,a="@=_=@",u=null,f=null,c=null,l=[],d={uid:0,hid:-1,q:[],tm:0,postMessage:function(e,t){var n=++d.uid,i=d.q,r={name:+new Date+""+n+"^"+document.domain+"&"+t,uid:n,target:e};i.push(r),d.tm||(d.tm=setInterval(function(){var e=d.q;if(!(0===e.length||e[0].uid<=d.hid)){var t=e[0];d.hid=t.uid,t.target.name=t.name}},10))},ListenerMessage:function(e,t){function n(){if(!e)return!1;var n=e.name;if(n!==i){d.q.shift(),i=n;var s=r.exec(n);if(!s)return;t&&t({origin:s[2],data:s[3]})}}var i="",r=/^(\d+?)\^(.+?)&(.*?)$/;setInterval(n,10)}};window.SufeiMessenger=t.exports={initListener:function(e){u=e.currentWin,f=e.originWin,c=e.msgTransfer,u&&f&&c&&(u.postMessage?u.addEventListener?u.addEventListener("message",i,!1):u.attachEvent&&u.attachEvent("onmessage",i):"fromFrame"==c?d.ListenerMessage(f,i):d.ListenerMessage(u,i))},register:function(e,t){l.push({event:e,callback:t})},send:function(e){var t=e.type+a+e.content;u&&f&&c&&(f.postMessage?f.postMessage(t,"*"):"fromFrame"==c?d.postMessage(f,t):d.postMessage(u,t,"*"))}}},{"./json_parse":5}],7:[function(e,t,n){function i(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}var r,s=e("../emit"),o=e("../sufei-base"),a=window,u=a.jQuery||a.Zepto,f=(i("String"),[].slice),c=o.extend({initialize:function(e){var t=this;s.on("event:cleanHijackQueue@sufei",function(){for(var e,n,i,r=[t.currentRequest].concat(t.queue),s=0;s<r.length;s++)r[s]&&(n=r[s].sufeiData,e=n&&n.defer,i=n&&n.response,e&&e.rejectWith(n.xhr,i))}),c.superclass.initialize.call(t,e),u=this.get$BySeajs(),u?t.setup():t.poll()},jQueryLike:function(e){var t=e.id||"";return/jquery|zepto/.test(t.toLowerCase())&&e.exports&&e.exports.fn},get$BySeajs:function(){var e=this;if(a.seajs){for(var t in seajs.cache)if(e.jQueryLike(seajs.cache[t])){u=seajs.cache[t].exports;break}return u||seajs.on&&seajs.on("exec",function(t){e.jQueryLike(t)&&(u=t.exports)}),u}},poll:function(){function e(){u=a.jQuery||a.Zepto||t.get$BySeajs(),u&&t.setup()}var t=this;r=setInterval(e,50)},setup:function(){var e=this;r&&clearInterval(r);var t=function(t,n){var i=n.success,r=t.defer;t.success=function(s,o,a){var c=e.validate(s);c.pass?(i&&i.apply(t.context||t,arguments),t.sufeiData&&t.sufeiData.defer&&t.sufeiData.defer.resolveWith(a,f.call(arguments))):(s=c.result||s,e.run({url:s.url,config:u.extend({sufeiData:{defer:r,xhr:a,response:f.call(arguments)},url:t.url},n),im:c.immediate}))}};u.ajaxPrefilter?u.ajaxPrefilter(function(n,i,r){if(u.Deferred){var s=u.Deferred();return r.done(function(t){var n=e.validate(t);n.pass&&s.resolveWith(r,f.call(arguments))}),r.fail(s.reject),n.defer=s,t(n,i),s.promise(r)}t(n,i)}):u(document).on("ajaxBeforeSend",function(e,n,i){/json/i.test(i.dataType)&&t(i,u.extend({},i))}),e.setup=function(){}},getValidateURI:function(e){u.ajax({url:e,dataType:"jsonp",sufei:!0,success:function(e){self.status=200,s.fire("event:showDialog@sufei",e.url)}})},resendRequest:function(e){var t=this;if(u){var n=[t.currentRequest];u.each(n.concat(t.queue),function(n,i){i.url=t.addQueryToken(i.url,e),"jsonp"===i.dataType&&(i.url=i.url.replace(/callback=[\d\w_]+/,"sufei_resend=1")),u.ajax(i)}),t.reset()}}});t.exports=c},{"../emit":3,"../sufei-base":8}],8:[function(e,t,n){function i(){var e=u.createElement("b");return e.innerHTML="<!--[if lte IE 7]><i></i><![endif]-->",1===e.getElementsByTagName("i").length}function r(e){return h?h(e):v(e)}function s(e,t){function n(){i.onload=i.onreadystatechange=null,i=null,t()}e||t&&t();var i=u.createElement("link");i.charset="utf-8",i.rel="stylesheet",i.href=e;var r="onload"in i;y&&!r&&setTimeout(function(){o(i,t)},1),r?i.onload=n:i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&n()},f.appendChild(i),u.createStyleSheet&&u.createStyleSheet(e)}function o(e,t){var n,i=e.sheet;if(y)i&&(n=!0);else if(i)try{i.cssRules&&(n=!0)}catch(r){"NS_ERROR_DOM_SECURITY_ERR"===r.name&&(n=!0)}setTimeout(function(){n?t():o(e,t)},20)}var a=window,u=document,f=u.head||u.getElementsByTagName("head")[0]||u.documentElement,c=a.navigator.userAgent,l=e("./emit"),d=e("./class"),p=e("./messenger"),v=e("./json_parse"),g=e("./utils"),h=a.JSON&&JSON.parse,m=function(){},y=+c.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1")<536,x=/iphone|ipad|ipod/.test(c.toLowerCase());t.exports=d.create({initialize:function(e){var t=this;e=e||{},t.app=e.app||"",t.version=e.version||"",t.style=e.style||"",t.dialog=null,t.reset(),t.listen()},reset:function(){var e=this;e.currentRequest=null,e.queue=[],e.status=0},listen:function(){var e=this;l.on("event:cleanHijackQueue@sufei",function(){e.reset()}),l.on("event:showDialog@sufei",function(t){if(t&&-1===t.indexOf("http")){var n=g.getDomainURI(e.currentRequest.url);t=n+t}e.dialog?e.show(t):s(e.style,function(){e.render(t),e.show()})}),l.on("msg:validateSuccess@sufei",function(t){e.resendRequest(t),e.hide(),p.send({type:"msg:resetCheckCode@sufei",content:""})})},initMessenger:function(e){var t=this;p.initListener({currentWin:a,originWin:e,msgTransfer:"fromFrame"}),p.register("msg:validateSuccess@sufei",function(e){l.fire("msg:validateSuccess@sufei",e)}),p.register("child",function(e){e=r(decodeURIComponent(e));var n=t.validate(e);return n.pass?e.queryToken||e.smToken?(e.smToken&&(e.queryToken="smToken="+e.smToken+"&smSign="+e.smSign),void l.fire("msg:validateSuccess@sufei",e.queryToken)):t.hide():l.fire("event:showDialog@sufei",e.url)})},show:function(e){var t=this;e&&t.frame.src!=e&&(t.frame.src=e),t.dialog&&(t.dialog.style.display="block"),p.send({type:"msg:refreshCheckCode@sufei",content:""}),l.fire("event:dialogShow@sufei")},hide:function(){l.fire("event:cleanHijackQueue@sufei"),this.dialog&&(this.dialog.style.display="none"),l.fire("event:dialogHide@sufei")},dialogStyleFix:function(e){var t=!!sufei.dialogWrapper;self.app?(e.className="sufei-dialog sufei-dialog-"+self.app,t&&(e.className+=" custom-dialog-wrapper")):e.className="sufei-dialog";var n=sufei.dialogStyle;if(n)for(var i in n)e.style[i]=n[i]},render:function(e){var t=this,n=u.createElement("div");n.style.display="none";var r=!!sufei.dialogWrapper;t.dialogStyleFix(n),n.innerHTML=[r?"":'<div class="sufei-dialog-mask">'+(i()?'<iframe frameborder="none" src="javascript:\'\'"></iframe>':"")+"</div>",'<div class="sufei-dialog-content">','<iframe id="sufei-dialog-content" frameborder="none" src="'+e+'"></iframe>','<div class="sufei-dialog-close" id="sufei-dialog-close">\u5173\u95ed</div>',"</div>"].join("");var s=u.body;sufei.dialogWrapper&&(s=sufei.dialogWrapper),s.appendChild(n);var o=u.getElementById("sufei-dialog-close");o.addEventListener?o.addEventListener("click",function(){t.hide()},!1):o.attachEvent("onclick",function(){return t.hide(),!1}),t.dialog=n,t.frame=u.getElementById("sufei-dialog-content"),t.initMessenger(t.frame.contentWindow),x&&t.iosFix();var a=e&&e.indexOf("/assist")>-1;a&&t.sampleFix(),t.render=function(){}},sampleFix:function(){u.getElementById("sufei-dialog-close").style.display="none",u.querySelector(".sufei-dialog-content").className="sufei-dialog-content map"},iosFix:function(){var e=u.body,t="sufei-ios-fix-fixed",n=0,i=this.dialog,r=e.style.height;e.classList.add(t),l.on("event:dialogShow@sufei",function(){n=e.scrollTop;var t=Math.max(window.innerHeight,e.scrollHeight);i.style.height=t>window.screen.height?window.screen.height+"px":"100%",e.style.height=i.style.height,setTimeout(function(){e.scrollTop=0},200)}),l.on("event:dialogHide@sufei",function(){e.scrollTop=n,e.style.height=r})},validate:function(e){if("string"==typeof e)try{e=r(e)}catch(t){return{pass:!0}}var n=g.checkResult(e);return n.pass?{pass:!0}:{result:e,pass:!1,isAntiFlood:n.isAntiFlood,immediate:n.immediate}},run:function(e){var t=this;return t.status>0&&!e.config.sufei?void t.queue.push(e.config):void(e.im?(t.currentRequest=t.currentRequest||e.config,t.status=200,l.fire("event:showDialog@sufei",e.url)):(t.currentRequest=e.config,t.status=100,t.getValidateURI(e.url)))},setup:m,getValidateURI:m,resendRequest:m,addQueryToken:function(e,t){return e+=/\?/.test(e)?"&"+t:"?"+t},parseJSON:r})},{"./class":1,"./emit":3,"./json_parse":5,"./messenger":6,"./utils":9}],9:[function(e,t,n){var i=document,r="rgv587_flag",s="sm",o="FAIL_SYS_USER_VALIDATE",a="RGV587_ERROR::SM",u="FAIL_SYS_TRAFFIC_LIMIT::\u6d41\u91cf\u9650\u5236",f="FAIL_SYS_FLOWLIMIT",c="assist_flag",l="true",d={loadJS:function(e,t,n){var r,s=[];if("string"==typeof t)s.push(t);else for(r in t)t.hasOwnProperty(r)&&s.push(r+"="+encodeURIComponent(t[r]));e=e+(-1==e.indexOf("?")?"?":"&")+s.join("&");var o="script",a=i.getElementsByTagName(o)[0],u=i.createElement(o);if(u.async=1,u.src=e,n){var f=!1;u.onload=u.onreadystatechange=function(){f||u.readyState&&!/loaded|complete/.test(u.readyState)||(u.onload=u.onreadystatechange=null,f=!0,n())}}a.parentNode.insertBefore(u,a)},checkResult:function(e){if(e){var t=e.ret;"object"==typeof t&&(t=JSON.stringify(t)),(e&&e[r]===s||e[r+"0"]===s)&&(t=a),e&&e[c]===l&&(t=a);var n="";t&&(t.indexOf(a)>-1?n="antiCreep":t.indexOf(o)>-1?n="antiFlood":(t.indexOf(u)>-1||t.indexOf(f)>-1)&&(n="limit"));var i="antiCreep"===n;return{pass:!n,interceptType:n,isAntiFlood:"antiFlood"===n,isAntiCreep:i,immediate:i&&e[r+"0"]!==s}}return{pass:!0}},addEvent:function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},removeEvent:function(e,t,n){t.removeEventListener?t.addEventListener(e,n,!1):t.detachEvent("on"+e,n)},getDomainURI:function(e){var t=/(https|http):\/\/([^\/]+)\//i,n=e.match(t);return n?n[0]:""}};t.exports=d},{}]},{},[4])(4)});