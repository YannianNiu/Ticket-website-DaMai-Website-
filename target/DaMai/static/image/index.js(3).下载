define("p/head/index",["base","io","node","util"],function(n,e,t){var r=n("base"),a=n("io"),o=n("node"),s=n("util");return function(n){function e(i){if(t[i])return t[i].exports;var r=t[i]={exports:{},id:i,loaded:!1};return n[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var t={};return e.m=n,e.c=t,e.p="/build/",e(0)}([function(n,e,t){function i(){new r}t(24);var r=t(12);new i,n.exports=i},,,function(n,e){var t=location.href.indexOf("test")!=-1||"127.0.0.1"==location.hostname?"test":"cn",i={env:t,host:"//api-gw.damai."+t+"/"};n.exports=i},function(n,e){n.exports=r},function(n,e){n.exports=a},,,function(n,e){n.exports=o},,function(n,e){n.exports=s},function(n,e,t){function r(){var n=this;n.loginkey="",n.getPointOptions=function(n){var e={};if(!n.getAttribute("data-spm"))return e;var t=window.g_SPM&&window.g_SPM.getParam(n)||{},i=n.getAttribute("data-alg")||"",r=n.getAttribute("data-href")||"";if(t&&t.d){var a="",o=t.d.replace(/^i/,""),s=encodeURIComponent(t.a+"."+t.b+"."+t.c+"."+o);e={params:{spm:s},buryPoint:{pageUrl:r,"spm-url":s,alg:i,source:""}}}return e},n.getUA=function(){var n={},e=navigator.userAgent.toLowerCase(),t;return(t=e.match(/edge\/([\d.]+)/))?n.edge=t[1]:(t=e.match(/rv:([\d.]+)\) like gecko/))?n.ie=t[1]:(t=e.match(/msie ([\d.]+)/))?n.ie=t[1]:(t=e.match(/firefox\/([\d.]+)/))?n.firefox=t[1]:(t=e.match(/chrome\/([\d.]+)/))?n.chrome=t[1]:(t=e.match(/opera.([\d.]+)/))?n.opera=t[1]:(t=e.match(/version\/([\d.]+).*safari/))&&(n.safari=t[1]),n},n.getSpmStr=function(e){var t=n.getPointOptions(e);return t&&t.params&&t.params.spm?"&spm="+t.params.spm:""},n.sendPoints=function(e,t){var i="&spm="+n.getSpmStr(t);window.goldlog&&window.goldlog.record("/damai_pc.default.click","CLK","locaid="+e+i,"POST")},n.changeURLPar=function(n,e,t){var r="";if(n=n||location.href,n.indexOf("?")==-1)return n+"?"+e+"="+t;r=n.substr(n.indexOf("?")+1);var a="",o="",s,c="0";if(r.indexOf("&")!=-1){s=r.split("&");for(i in s)s[i].split("=")[0]==e?(o=t,c="1"):o=s[i].split("=")[1],a=a+s[i].split("=")[0]+"="+o+"&";a=a.substr(0,a.length-1),"0"==c&&a==r&&(a=a+"&"+e+"="+t)}else r.indexOf("=")!=-1?(s=r.split("="),s[0]==e?(o=t,c="1"):o=s[1],a=s[0]+"="+o,"0"==c&&a==r&&(a=a+"&"+e+"="+t)):a=e+"="+t;return n.substr(0,n.indexOf("?"))+"?"+a},n.getCookie=function(n){var e=void 0,t=new RegExp("(^| )"+n+"=([^;]*)(;|$)");return(e=document.cookie.match(t))?e[2]:null},n.delCookie=function(n){var e=new Date;e.setTime(e.getTime()-864e5);var t="/",i="damai."+o;document.cookie=n+"=;domain="+i+";path=/;expires="+e.toGMTString(),document.cookie=n+"=;path=/;expires="+e.toGMTString()},n.setCookie=function(e,t,i){n.delCookie(e),i=i||2592e6;var r=new Date;r.setTime(r.getTime()+i),document.cookie=e+"="+escape(t)+";domain=damai."+o+";expires="+r.toGMTString()+";path=/"},n.getUrlParam=function(n,e){e=e||location.search;var t=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),i=e.substr(1).match(t);return null!=i?i[2]:""},n.checkLogin=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:window.location.href,t=n.getCookie("damai.cn_user_new");return n.loginkey=n.getCookie("loginkey"),!t||!n.loginkey},n.login=function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:window.location.href;return window.location.href="//passport.damai."+o+"/login?ru="+encodeURIComponent(n),!1}}var a=t(3),o=a.env,s=new r;n.exports=s},function(n,e,t){function i(){var n=[];x.jsonp(f+"navigation.html",{},function(e){e&&e.data&&e.data.length&&(e.data.forEach(function(e,t){n.push('<a href="'+e.schema+'" class="type-recommend" data-spm="dother'+t+'">'+e.title+"</a>")}),g(".recommend-header").append(n.join("")))})}function r(n){location.hostname==="www.damai."+d&&(n.find(".location-header").show(),x.jsonp(f+"cityList.html",{},function(e){if(!e||!e.hotCities||!e.allCities)return void console.log("\u83b7\u53d6\u57ce\u5e02\u5217\u8868\u5f02\u5e38");a(n,e.hotCities,".hot-city .list-other"),a(n,e.allCities,".other-city .list-other")}),n.find(".city-location").html(w),n.find(".now-city .name-city").html(w),n.delegate("click",".name-city",function(n){var e=g(n.target).html();e&&(p("destCity",e),u.sendPoints("dselectcity&clicktitle="+e,n.target),location.reload())}))}function a(n,e,t){for(var i="",r=0,a=e.length;r<a;r++){var o=e[r];i+="<span  class='name-city' data-spm='dselectcity&clicktitle="+o+"'>"+o+"</span>"}n.find(t).html(i)}function o(n){if(k&&y){var e=n.find(".user-header");n.find(".out-login").addClass("show"),n.find(".out-login").on("click",function(){for(var n=0;n<h.length;n++)u.delCookie(h[n]);location.href="//ipassport.damai."+d+"/logout.htm?site=18&toURL="+encodeURIComponent(location.href)+u.getSpmStr(this)}),x.jsonp(f+"user.html",{loginkey:k},function(e){if(e&&e.userNick){var t=e;t.userImg=t.userImg||"https://img.alicdn.com/tfs/TB1SF.EBTtYBeNjy1XdXXXXyVXa-150-150.png",t.userImg=t.userImg.replace(/(http:|https:)/,""),n.find(".i-user").attr("src",t.userImg),n.find(".J_userinfo_img").attr("href",n.find(".J_userinfo_name").attr("href")),n.find(".login-user").removeClass("show");var i=n.find(".name-user").html(t.userNick).addClass("show")}})}}function s(n){var e=n.find(".input-search"),t=n.find(".list-search"),i=n.find(".btn-search"),r=null,a=1,o=n.find(".search-header"),s=u.getUrlParam("keyword");s&&e.val(decodeURIComponent(s)),i.on("click",function(){var n=u.getSpmStr(this);window.location.href="//search.damai.cn/search.html?keyword="+encodeURIComponent(e.val())+n}),e.on("keyup",function(n){var e=this,i=e.value;r&&clearTimeout(r),r=setTimeout(function(){if(13===n.keyCode){var r=u.getSpmStr(e);return void(window.location.href="//search.damai.cn/search.html?keyword="+encodeURIComponent(i)+r)}if(!i)return t.html(""),void t.removeClass("search-border");o.addClass("on"),x.jsonp(f+"suggest.html",{keyword:i,destCity:w},function(n){var e=n,i="";if(e&&e.length){for(var r=0,a=e.length;r<a;r++){var o=e[r];i+='<a href="//piao.damai.'+d+"/"+o.id+'.html" class="li-search" data-spm="ditem_'+r+'" target="_blank">\n\t\t\t\t\t\t\t\t<span class="title-search">'+o.name+'</span>\n\t\t\t\t\t\t\t\t<span class="city-search">'+o.cityName+"</span>\n\t\t\t\t\t\t\t</a>"}t.html(i),t.addClass("search-border")}})},100)})}function c(n){n.on("mouseover",function(){n.addClass("on")}),n.on("mouseout",function(){n.removeClass("on")})}var l=t(3),u=t(11),f=l.host,d=l.env,m=u.getCookie,p=u.setCookie,h="damai.cn_user,damai.cn_user_new,h5token,loginkey,user_id,damai_cn_user,damai.cn_email,damai.cn_nickName,x_hm_tuid,_tb_token_".split(","),v=t(4),g=t(8),x=t(5),w=u.getCookie("destCity");w=w?unescape(w):"\u5168\u56fd";var k=m("loginkey"),y=m("damai.cn_nickName");y=y?unescape(y):"";var b=t(13),C=v.extend({initializer:function T(){var n=new b,e=g(".dm-header-wrap");r(e),o(e),s(e),i(e),c(e.find(".download-header")),c(e.find(".location-header")),g("body").on("click",function(){e.find(".search-header").removeClass("on")}),c(e.find(".user-header")),e.find(".span-user").on("click",function(){location.href="//passport.damai."+d+"/login?ru="+location.href});for(var t=g(".type-recommend"),a=0,l=t.length;a<l;a++){var u=g(t[a]);u.attr("href").indexOf(location.host)>=0?u.addClass("select"):u.removeClass("select")}}},{ATTRS:{}});n.exports=C},function(n,e,t){var i=t(3),r=i.env;t(14);var a=t(8),o=t(10),s=t(15),c=t(5),l=t(4),u=l.extend({initializer:function f(){var n=this;n.initScroll(),n.bindEvent(),n.getToken()},initScroll:function d(){var n=this,e=a(s());a("body").append(e);var t=e.one(".J_GoTop"),i=e.all(".item")[1];n.st=function(){a(window).scrollTop()<=122?(t.hide(),a(i).css({"border-bottom-width":"0px"})):"none"===t.css("display")&&(t.show(),a(i).css({"border-bottom-width":"1px"}))},n.st();var r=o.throttle(n.st,40);a(window).on("scroll",r)},goTopAmi:function m(){var n=this;cancelAnimationFrame(n.timer),n.timer=requestAnimationFrame(function e(){var t=document.body.scrollTop||document.documentElement.scrollTop;t>0?(document.body.scrollTop=document.documentElement.scrollTop=t-150,n.timer=requestAnimationFrame(e)):(cancelAnimationFrame(n.timer),n.st())})},bindEvent:function p(){var n=this;a("body").delegate("click",".alime",function(e){e.preventDefault(),n.showAlime()},this),a(".J_GoTop").on("click",function(){n.goTopAmi()})},getToken:function h(n){var e=this,t="//online.damai.cn/alime/getDialogToken?from=damai_pc&jsonCallback=jsonCallback";window.jsonCallback=function(n){n&&n.token&&(e.token=n.token)},new c({type:"get",url:"//online.damai.cn/alime/getDialogToken?from=damai_pc&jsonCallback=jsonCallback",jsonpCallback:"jsonCallback",dataType:"jsonp"})},showAlime:function v(){var n=this,e=document.location.host;if(location.href.indexOf("debug")==-1||"www.damai.cn"!==e&&"www.damai.test"!==e){var t="header_service";window.open("https://online.damai.cn/alime/toalime?from=damai_itemdetail&page=header_service")}else n.token?n.openDialog():window.open("//passport.damai.cn/login?ru="+document.location.href)},openDialog:function g(){var n=this;n.alicareDialog?n.alicareDialog.ui.emit("openDialog"):n.initAlime(function(){n.alicareDialog.ui.emit("openDialog")})},initAlime:function x(n){var e=this;window.alicareDialogAsyncInit=function(t){e.alicareDialog=new t({from:"damai_pc",accessToken:e.token}),e.alicareDialog.onRendered(function(e){n&&n()})};var t=document.createElement("script");t.src="//g.alicdn.com/crm/alicare-dialog/0.0.4/include.js",document.getElementsByTagName("body")[0].appendChild(t)}},{ATTRS:{}});n.exports=u},function(n,e){},function(n,e,t){var i=t(16);n.exports=function(){var n=function t(n){var e,t,i,r,a,o,s,c,l,u,f,d=this,m=d.root,p=d.buffer,h=d.scope,v=d.runtime,g=d.name,x=d.pos,w=h.data,k=h.affix,y=m.nativeCommands,b=m.utils,C=b.callFn,T=b.callDataFn,_=b.callCommand,S=y.range,A=y["void"],j=y.foreach,E=y.forin,I=y.each,O=y["with"],D=y["if"],P=y.set,N=y.include,L=y.parse,R=y.extend,B=y.block,F=y.macro,U=y["debugger"];return p.data+='<div class="sidebar" data-spm="slidelayer">\n    <div class="item">\n        <a class="alime" href="//online.damai.cn/alime/index?from=damai_pc_item&v=3" target="_blank" data-spm="dcustomerservice">\n            <div class="icon service"></div>\n            <p>\u5728\u7ebf\u5ba2\u670d</p>\n        </a>\n    </div>\n    <div class="item">\n        <a href="javascript:void(0)" target="_blank">\n            <div class="icon damai"></div>\n            <p>APP\u4e0b\u8f7d</p>\n            <div class="qrcode">\n                <img src="//img.alicdn.com/tfs/TB1r0uFxHSYBuNjSspiXXXNzpXa-280-280.png" width="72" height="72" />\n            </div>\n        </a>\n    </div>\n    <div class="item J_GoTop" >\n        <div class="icon gotop"></div>\n        <p>\u56de\u5230\u9876\u90e8</p>\n    </div>\n</div>',p};if(this.root instanceof i)return n.apply(this,arguments);var e=new i(n);return e.render.apply(e,arguments)}},function(n,e,t){function i(n,e,t,i,r,a,o,s){this.name=n,this.originalName=a||n,this.runtime=e,this.root=t,this.pos={line:1},this.scope=i,this.buffer=r,this.fn=o,this.parent=s}function r(n,e,t){var i=t[0],r=n&&n[i]||e&&e[i]||v[i];if(1===t.length)return r;if(r)for(var a=t.length,o=1;o<a;o++)if(!(r=r[t[o]]))return!1;return r}function a(n,e){var t=n.split("/"),i=e.split("/");t.pop();for(var r=0,a=i.length;r<a;r++){var o=i[r];"."===o||(".."===o?t.pop():t.push(o))}return t.join("/")}function o(n,e,t,i,a,o){var s,c,l;if(o||(l=r(n.runtime.commands,n.root.config.commands,a)),l)return l.call(n,e,t,i);if(l!==!1){var u=a.slice(0,-1);if(null==(s=e.resolve(u,o)))return i.error("Execute function `"+a.join(".")+"` Error: "+u.join(".")+" is undefined or null"),i;if(c=s[a[a.length-1]])try{return c.apply(s,t.params||[])}catch(f){return i.error("Execute function `"+a.join(".")+"` Error: "+f.message),i}}return i.error("Command Not Found: "+a.join(".")),i}function s(n,e){var t=this;t.fn=n,t.config=p.merge(s.globalConfig,e),this.subNameResolveCache={}}function c(n,e,t){if("."!==e.charAt(0))return e;var i=t+"_ks_"+e,r=n.subNameResolveCache,o=r[i];return o?o:e=r[i]=a(t,e)}function l(n,e,t,i,r,a){var o=c(n,a,r.name),s=i.insert(),l=s.next;return f(n,o,r.runtime,e,s,a,t,i.tpl),l}function u(n,e,t,r,a){var o=t.insert(),s=o.next,c=new i(a.TPL_NAME,r.runtime,n,e,o,undefined,a,t.tpl);return o.tpl=c,d(c),s}function f(n,e,t,r,a,o,s,c){var l=new i(e,t,n,r,a,o,undefined,c);a.tpl=l,n.config.loader.load(l,function(n,e){"function"==typeof e?(l.fn=e,d(l)):n?a.error(n):(e=e||"",s?a.writeEscaped(e):a.data+=e,a.end())})}function d(n){var e=n.fn();if(e){var t=n.runtime,i=t.extendTpl,r;if(i&&!(r=i.params[0]))return e.error("extend command required a non-empty parameter");var a=t.extendTplFn,o=t.extendTplBuffer;return a?(t.extendTpl=null,t.extendTplBuffer=null,t.extendTplFn=null,u(n.root,n.scope,o,n,a).end()):r&&(t.extendTpl=null,t.extendTplBuffer=null,l(n.root,n.scope,0,o,n,r).end()),e.end()}}function m(n,e,t){var i=e.params;if(!i[0])return t.error("include command required a non-empty parameter");var r=n,a=i[1],o=e.hash;return o&&(a=a?p.mix({},a):{},p.mix(a,o)),a&&(r=new g(a,undefined,n)),r}var p=t(17),h=t(18),v={},g=t(19),x=t(20),w={callFn:o,callDataFn:function k(n,e){for(var t=e[0],i=t,r=1;r<e.length;r++){var a=e[r];if(!i||null==i[a])return"";t=i,i=i[a]}return i.apply(t,n||[])},callCommand:function y(n,e,t,i,r){return o(n,e,t,i,r)}};p.mix(s,{config:function b(n,e){var t=this.globalConfig=this.globalConfig||{};if(!arguments.length)return t;e!==undefined?t[n]=e:p.mix(t,n)},nativeCommands:h,utils:w,util:p,addCommand:function C(n,e){v[n]=e},removeCommand:function T(n){delete v[n]}}),s.prototype={constructor:s,Scope:g,nativeCommands:h,utils:w,removeCommand:function _(n){var e=this.config;e.commands&&delete e.commands[n]},addCommand:function S(n,e){var t=this.config;t.commands=t.commands||{},t.commands[n]=e},include:function A(n,e,t,i){return l(this,m(n,e,t),e.escape,t,i,e.params[0])},includeModule:function j(n,e,t,i){return u(this,m(n,e,t),t,i,e.params[0])},render:function E(n,e,t){var r="",a=this,o=a.fn,c=a.config;"function"==typeof e&&(t=e,e=null),e=e||{},t=t||function(n,e){if(n)throw n instanceof Error||(n=new Error(n)),n;r=e};var l=a.config.name;!l&&o&&o.TPL_NAME&&(l=o.TPL_NAME);var u;u=n instanceof g?n:new g(n);var f=new s.LinkedBuffer(t,c).head,m=new i(l,{commands:e.commands},a,u,f,l,o);return f.tpl=m,o?(d(m),r):(c.loader.load(m,function(n,e){e?(m.fn=a.fn=e,d(m)):n&&f.error(n)}),r)}},s.Scope=g,s.LinkedBuffer=x,n.exports=s},function(n,e){(function(e){function t(){var n="";for(var e in i)n+=e+"|";return n=n.slice(0,-1),a=new RegExp(n,"g")}var i={"&":"&amp;",">":"&gt;","<":"&lt;","`":"&#x60;","/":"&#x2F;",'"':"&quot;","'":"&#x27;"},r=/[&<>"'`]/,a=t(),o=/\\?\{([^{}]+)\}/g,s=void 0!==e?e:window,c,l=Object.prototype.toString;n.exports=c={isArray:Array.isArray||function(n){return"[object Array]"===l.call(n)},keys:Object.keys||function(n){var e=[],t;for(t in n)n.hasOwnProperty(t)&&e.push(t);return e},each:function u(n,e,t){if(n){var i,r,a,o=0,s=n&&n.length,l=s===undefined||"[object Function]"===Object.prototype.toString.call(n);if(t=t||null,l)for(a=c.keys(n);o<a.length&&(i=a[o],e.call(t,n[i],i,n)!==!1);o++);else for(r=n[0];o<s&&e.call(t,r,o,n)!==!1;r=n[++o]);}return n},mix:function f(n,e){if(e)for(var t in e)n[t]=e[t];return n},globalEval:function d(n){s.execScript?s.execScript(n):function(n){s.eval.call(s,n)}(n)},substitute:function m(n,e,t){return"string"==typeof n&&e?n.replace(t||/\\?\{([^{}]+)\}/g,function(n,t){return"\\"===n.charAt(0)?n.slice(1):e[t]===undefined?"":e[t]}):n},escapeHtml:function p(n){return n=""+n,r.test(n)?(n+"").replace(a,function(n){return i[n]}):n},merge:function h(){for(var n=0,e=arguments.length,t={};n<e;n++){var i=arguments[n];i&&c.mix(t,i)}return t}}}).call(e,function(){return this}())},function(n,e,t){var i=t(19),r=t(17),a={range:function o(n,e){var t=e.params,i=t[0],r=t[1],a=t[2];a?(i>r&&a>0||i<r&&a<0)&&(a=-a):a=i>r?-1:1;for(var o=[],s=i;i<r?s<r:s>r;s+=a)o.push(s);return o},"void":function s(){return undefined},foreach:function c(n,e,t){var r=e.params,a=r[0],o=r[2]||"xindex",s=r[1],c,l,u,f;if(a)for(c=a.length,f=0;f<c;f++)l=new i(a[f],{xcount:c,xindex:f},n),u=l.affix,"xindex"!==o&&(u[o]=f,u.xindex=undefined),s&&(u[s]=a[f]),t=e.fn(l,t);return t},forin:function l(n,e,t){var r=e.params,a=r[0],o=r[2]||"xindex",s=r[1],c,l,u;if(a)for(u in a)c=new i(a[u],{xindex:u},n),l=c.affix,"xindex"!==o&&(l[o]=u,l.xindex=undefined),s&&(l[s]=a[u]),t=e.fn(c,t);return t},each:function u(n,e,t){var i=e.params,o=i[0];return o?r.isArray(o)?a.foreach(n,e,t):a.forin(n,e,t):t},"with":function f(n,e,t){var r=e.params,a=r[0];if(a){var o=new i(a,undefined,n);t=e.fn(o,t)}return t},"if":function d(n,e,t){if(e.params[0]){var i=e.fn;i&&(t=i(n,t))}else{var r=!1,a=e.elseIfs,o=e.inverse;if(a)for(var s=0,c=a.length;s<c;s++){var l=a[s];if(r=l.test(n)){t=l.fn(n,t);break}}!r&&o&&(t=o(n,t))}return t},set:function m(n,e,t){for(var i=e.hash,r=i.length,a=0;a<r;a++){var o=i[a],s=o.key,c=o.depth,l=o.value;if(1===s.length){for(var u=n.root;c&&u!==n;)n=n.parent,--c;n.set(s[0],l)}else{var f=n.resolve(s.slice(0,-1),c);f&&(f[s[s.length-1]]=l)}}return t},include:1,parse:1,extend:1,block:function p(n,e,t){var i=this,r=i.runtime,a=e.params,o=a[0],s;2===a.length&&(s=a[0],o=a[1]);var c=r.blocks=r.blocks||{},l=c[o],u,f={fn:e.fn,type:s};if(l){if(l.type)if("append"===l.type)f.next=l,c[o]=f;else if("prepend"===l.type){var d;for(u=l;u&&"prepend"===u.type;)d=u,u=u.next;f.next=u,d.next=f}}else c[o]=f;if(!r.extendTpl)for(u=c[o];u;)u.fn&&(t=u.fn.call(i,n,t)),u=u.next;return t},macro:function h(n,e,t){var r=e.hash,a=e.params,o=a[0],s=a.slice(1),c=this,l=c.runtime,u=l.macros=l.macros||{},h=u[o];if(e.fn)u[o]={paramNames:s,hash:r,fn:e.fn};else if(h){var f=h.hash||{},d;if(d=h.paramNames)for(var m=0,p=d.length;m<p;m++){var v=d[m];f[v]=s[m]}if(r)for(var g in r)f[g]=r[g];var x=new i(f);x.root=n.root,t=h.fn.call(c,x,t)}else{var w="can not find macro: "+o;t.error(w)}return t}};a["debugger"]=function(){r.globalEval("debugger")},n.exports=a},function(n,e){function t(n,e,t){n!==undefined?this.data=n:this.data={},t?(this.parent=t,this.root=t.root):(this.parent=undefined,this.root=this),this.affix=e||{},this.ready=!1}t.prototype={isScope:1,constructor:t,setParent:function i(n){this.parent=n,this.root=n.root},set:function r(n,e){this.affix[n]=e},setData:function a(n){this.data=n},getData:function o(){return this.data},mix:function s(n){var e=this.affix;for(var t in n)e[t]=n[t]},get:function c(n){var e=this.data,t,i=this.affix;return null!=e&&(t=e[n]),t!==undefined?t:i[n]},resolveInternalOuter:function l(n){var e=n[0],t,i=this,r=i;if("this"===e)t=i.data;else if("root"===e)r=r.root,t=r.data;else{if(!e)return[r.data];do{t=r.get(e)}while(t===undefined&&(r=r.parent))}return[undefined,t]},resolveInternal:function u(n){var e=this.resolveInternalOuter(n);if(1===e.length)return e[0];var t,i=n.length,r=e[1];if(r===undefined)return undefined;for(t=1;t<i;t++){if(null==r)return r;r=r[n[t]]}return r},resolveLooseInternal:function f(n){var e=this.resolveInternalOuter(n);if(1===e.length)return e[0];var t,i=n.length,r=e[1];for(t=1;null!=r&&t<i;t++)r=r[n[t]];return r},resolveUp:function d(n){return this.parent&&this.parent.resolveInternal(n)},resolveLooseUp:function m(n){return this.parent&&this.parent.resolveLooseInternal(n)},resolveOuter:function p(n,e){var t=this,i=t,r;if(!e&&1===n.length){if((r=t.get(n[0]))!==undefined)return[r];e=1}if(e)for(;i&&e--;)i=i.parent;return i?[undefined,i]:[undefined]},resolveLoose:function h(n,e){var t=this.resolveOuter(n,e);return 1===t.length?t[0]:t[1].resolveLooseInternal(n)},resolve:function v(n,e){var t=this.resolveOuter(n,e);return 1===t.length?t[0]:t[1].resolveInternal(n)}},n.exports=t},function(n,e,t){function i(n,e,t){this.list=n,this.init(),this.next=e,this.ready=!1,this.tpl=t}function r(n,e){var t=this;t.config=e,t.head=new i(t,undefined),t.callback=n,this.init()}var a=t(17);i.prototype={constructor:i,isBuffer:1,init:function o(){this.data=""},append:function s(n){return this.data+=n,this},write:function c(n){if(null!=n){if(n.isBuffer)return n;this.data+=n}return this},writeEscaped:function l(n){if(null!=n){if(n.isBuffer)return n;this.data+=a.escapeHtml(n)}return this},insert:function u(){var n=this,e=n.list,t=n.tpl,r=new i(e,n.next,t),a=new i(e,r,t);return n.next=a,n.ready=!0,a},async:function f(n){var e=this.insert(),t=e.next;return n(e),t},error:function d(n){var e=this.list.callback;if(e){var t=this.tpl;if(t){n instanceof Error||(n=new Error(n));var i=t.name,r=t.pos.line,a="XTemplate error in file: "+i+" at line "+r+": ";n.stack=a+n.stack,n.message=a+n.message,n.xtpl={pos:{line:r},name:i}}this.list.callback=null,e(n,undefined)}},end:function m(){var n=this;return n.list.callback&&(n.ready=!0,n.list.flush()),n}},r.prototype={constructor:r,init:function p(){this.data=""},append:function h(n){this.data+=n},end:function v(){this.callback(null,this.data),this.callback=null},flush:function g(){for(var n=this,e=n.head;e;){if(!e.ready)return void(n.head=e);this.data+=e.data,e=e.next}n.end()}},r.Buffer=i,n.exports=r},,,,function(n,e){}])}),KISSY.use("p/head/index");